@32
D=A
@nextR
M=D

(start)
@R0
D=M
@nextR
A=M
M=D
@nextR
M=M+1

@R0
D=M
@1
D=D-1
@end
D;JEQ
D=D+1
@1
D=D&A
@ODD
D;JGT
@EVEN
0;JMP

(ODD) 
@3
D=A
@temp
M=D
@value
M=0
(add)
@R0
D=M
@value
M=M+D
@temp
M=M-1
D=M
@add
D;JGT
@value
M=M+1
D=M
@R0
M=D
@start
0;JMP

(EVEN) 
@15
D=A
@leftshift
M=D
(shiftstart)
@leftshift
D=M
D=D-1
M=D
@start
D;JLT
(shift)
@32767
D=A+1
@R0
D=D&M
@MSB1
D;JLT
(MSB0)
@R0
D=M
D=M+D
M=D
@shiftstart
0;JMP
(MSB1)
@R0
D=M
D=M+D
M=D+1
@shiftstart
0;JMP

(end)
@end
0;JMP
