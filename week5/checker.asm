
@SCREEN
D=A
@nextpixel
M=D
@257
D=A
@linenumber
M=D
@KBD
D=M
@67
D=D-A
@branchc
D;JEQ

(start)
@linenumber
M=M-1
D=M
@end
D;JEQ
@1
D=D&A
@pattern2
D;JGT
@pattern1
0;JMP

(pattern1)
@32
D=A
@toprint
M=D
(printline1)
@toprint
M=M-1
D=M
@start
D;JLT
@21845
D=A
@nextpixel
A=M
M=D
@nextpixel
M=M+1
@printline1
0;JMP

(pattern2)
@32
D=A
@toprint
M=D
(printline2)
@toprint
M=M-1
D=M
@start
D;JLT
@21846
D=-A
@nextpixel
A=M
M=D
@nextpixel
M=M+1
@printline2
0;JMP

(branchc)
(startc)
@linenumber
M=M-1
D=M
@end
D;JEQ
@1
D=D&A
@pattern2c
D;JGT
@pattern1c
0;JMP

(pattern1c)
@32
D=A
@toprint
M=D
(printline1c)
@toprint
M=M-1
D=M
@startc
D;JLT
@21846
D=-A
@nextpixel
A=M
M=D
@nextpixel
M=M+1
@printline1c
0;JMP

(pattern2c)
@32
D=A
@toprint
M=D
(printline2c)
@toprint
M=M-1
D=M
@startc
D;JLT
@21845
D=A
@nextpixel
A=M
M=D
@nextpixel
M=M+1
@printline2c
0;JMP

(end)
@end
0;JMP
